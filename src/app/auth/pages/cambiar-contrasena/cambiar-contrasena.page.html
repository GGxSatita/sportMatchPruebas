<app-header></app-header>

<ion-content class="ion-padding fondo-app">
  <ion-grid>
    <ion-row>
      <ion-col size="12" size-md="8" offset-md="2" size-lg="6" offset-lg="3">
        <form [formGroup]="passwordForm" (ngSubmit)="changePassword()">
          <!-- Contraseña Actual -->
          <ion-item class="input-item">
            <ion-label position="floating">Contraseña Actual</ion-label>
            <ion-input type="password" formControlName="currentPassword"></ion-input>
          </ion-item>
          <ion-note *ngIf="passwordForm.get('currentPassword').hasError('required') && passwordForm.get('currentPassword').touched" class="error-message">
            Este campo es obligatorio.
          </ion-note>

          <!-- Nueva Contraseña -->
          <ion-item class="input-item">
            <ion-label position="floating">Nueva Contraseña</ion-label>
            <ion-input type="password" formControlName="newPassword"></ion-input>
          </ion-item>
          <ion-note *ngIf="passwordForm.get('newPassword').hasError('minlength') && passwordForm.get('newPassword').touched" class="error-message">
            La contraseña debe tener al menos 6 caracteres.
          </ion-note>

          <!-- Confirmar Contraseña -->
          <ion-item class="input-item">
            <ion-label position="floating">Confirmar Contraseña</ion-label>
            <ion-input type="password" formControlName="confirmPassword"></ion-input>
          </ion-item>
          <ion-note *ngIf="passwordForm.hasError('passwordMismatch') && passwordForm.get('confirmPassword').touched" class="error-message">
            Las contraseñas no coinciden.
          </ion-note>

          <!-- Botón de Cambiar Contraseña -->
          <div class="ion-padding">
            <ion-button expand="block" type="submit" class="btn-cambiar-contrasena" [disabled]="cargando || passwordForm.invalid">
              Cambiar Contraseña
              <ion-spinner *ngIf="cargando" slot="end"></ion-spinner>
            </ion-button>
          </div>
        </form>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<app-footer></app-footer>
